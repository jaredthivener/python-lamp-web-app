/* =========================
   CSS Variables
========================= */
:root {
    /* Light/dark, lamp colors, etc. (same as before) */
    --bg-light-primary: #fefefe;
    --bg-light-secondary: #f8f9fa;
    --text-light-primary: #2c3e50;
    --text-light-secondary: #5d6d7e;
    --accent-light: #3498db;

    --bg-dark-primary: #0f0f23;
    --bg-dark-secondary: #1a1a2e;
    --text-dark-primary: #eee;
    --text-dark-secondary: #bbb;
    --accent-dark: #64b5f6;

    --lamp-shade-color: #2c3e50;
    --lamp-shade-inner: #34495e;
    --lamp-metal: #7f8c8d;
    --lamp-cord: #34495e;
    --bulb-off: #f8f9fa;
    --bulb-on: #fff8dc;
    --bulb-glow: rgba(255, 248, 220, 0.9);

    --lamp-gradient: linear-gradient(180deg, var(--lamp-shade-color), var(--lamp-shade-inner));
    --elevation-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);

    --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Theme Application */
[data-theme="light"] {
    --bg-primary: var(--bg-light-primary);
    --bg-secondary: var(--bg-light-secondary);
    --text-primary: var(--text-light-primary);
    --text-secondary: var(--text-light-secondary);
    --accent: var(--accent-light);
}
[data-theme="dark"] {
    --bg-primary: var(--bg-dark-primary);
    --bg-secondary: var(--bg-dark-secondary);
    --text-primary: var(--text-dark-primary);
    --text-secondary: var(--text-dark-secondary);
    --accent: var(--accent-dark);
}

/* =========================
   Base + Layout
========================= */
* { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 16px; scroll-behavior: smooth; }
body {
    font-family: 'Google Sans', 'Roboto', sans-serif;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
    transition: var(--transition-smooth);
}

.background-gradient { position: fixed; inset: 0; background: radial-gradient(circle at 50% 50%, var(--bg-secondary) 0%, var(--bg-primary) 70%); z-index: -2; transition: var(--transition-smooth); }
[data-theme="light"] .background-gradient { background: radial-gradient(circle at 50% 50%, #e3f2fd 0%, var(--bg-primary) 70%); }

.container { text-align: center; padding: 2rem; max-width: 600px; margin: 0 auto; min-height: 100vh; display:flex; flex-direction: column; align-items: center; }

/* App header & title */
.app-header { margin-bottom: 3rem; opacity: 0; animation: fadeInUp 1s ease-out 0.2s forwards; }
.app-title { font-size: 2.5rem; font-weight: 600; margin-bottom: 2rem; background: linear-gradient(135deg, var(--accent), var(--text-primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 4px 20px rgba(0,0,0,0.1); }

/* Lamp container */
.lamp-container { position: relative; display:flex; flex-direction: column; align-items: center; margin: 4rem 0; height: 400px; opacity:0; animation: fadeInUp 1s ease-out 0.4s forwards; }
.ceiling-mount{ position:absolute; top:0; width:60px; height:20px; background: linear-gradient(180deg,var(--lamp-metal),#5d6d7e); border-radius:10px 10px 2px 2px; box-shadow: 0 2px 10px rgba(0,0,0,0.3), inset 0 1px 3px rgba(255,255,255,0.2); }
.ceiling-mount::before { content:''; position:absolute; top:-10px; left:50%; transform:translateX(-50%); width:40px; height:10px; background:var(--bg-secondary); border-radius:0 0 5px 5px; }

.hanging-cord { position:absolute; top:20px; width:3px; height:80px; background: linear-gradient(180deg, var(--lamp-cord), #2c3e50); }
.hanging-lamp { position:relative; top:100px; cursor:pointer; transition: var(--transition-smooth); transform-origin: top center; animation: gentleSway 6s ease-in-out infinite; will-change: transform; }
.hanging-lamp:hover { transform: scale(1.02); animation-play-state: paused; }
.hanging-lamp:focus { outline: none; }

/* Lamp visuals */
.lamp-shade { position:relative; width:200px; height:120px; background:transparent; }
.shade-top{ position:absolute; top:0; left:50%; transform: translateX(-50%); width:40px; height:15px; background: linear-gradient(180deg,var(--lamp-metal),#5d6d7e); border-radius:50% 50% 25% 25%; }
.shade-body{ position:absolute; top:10px; left:0; width:100%; height:100px; background: var(--lamp-gradient); border-radius:50% 50% 25% 25%; transition: var(--transition-smooth); overflow:hidden; }
.shade-bottom{ position:absolute; bottom:5px; left:10%; width:80%; height:8px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); }

.light-bulb { position:absolute; top:35px; left:50%; transform: translateX(-50%); width:30px; height:45px; }
.bulb-base{ position:absolute; bottom:0; left:50%; transform:translateX(-50%); width:12px; height:15px; background:var(--lamp-metal); }
.bulb-glass{ position:absolute; bottom:12px; left:50%; transform:translateX(-50%); width:24px; height:32px; background:var(--bulb-off); transition: var(--transition-smooth); }
.bulb-filament{ position:absolute; bottom:18px; left:50%; transform:translateX(-50%); width:8px; height:12px; border:1px solid rgba(0,0,0,0.2); opacity:0.3; transition: var(--transition-smooth); }

.light-glow{ position:absolute; top:50px; left:50%; transform:translateX(-50%); width:180px; height:180px; background: radial-gradient(circle, var(--bulb-glow), transparent 70%); border-radius:50%; opacity:0; transition: var(--transition-smooth); pointer-events:none; filter: blur(15px); }

/* ON state */
.hanging-lamp.on .shade-body{ box-shadow: 0 5px 5px -3px rgba(255,248,220,0.4), 0 12px 40px rgba(255,248,220,0.3); background: linear-gradient(180deg,#455a64,#37474f); }
.hanging-lamp.on .bulb-glass{ background: var(--bulb-on); box-shadow: 0 0 20px rgba(255,248,220,0.8); }
.hanging-lamp.on .bulb-filament{ opacity:0.8; border-color: rgba(255,200,0,0.8); }
.hanging-lamp.on .light-glow{ opacity:1; }

/* Pull string */
.pull-string-container{ position:absolute; bottom:-140px; left:50%; transform:translateX(-50%); height:140px; width:120px; }
.string-svg{ width:100%; height:105px; cursor: grab; }
.string-svg:hover .string-path { stroke:#ecf0f1; stroke-width:3.5; }
.string-path { transition: stroke 0.2s ease; }
.string-handle-svg { cursor:grab; transition: all 0.25s cubic-bezier(0.25,0.46,0.45,0.94); }
.string-handle-svg:hover { filter: drop-shadow(3px 3px 8px rgba(255,107,53,0.5)); }
.string-handle-svg:active { cursor: grabbing; }

/* =========================
   Stats + Activities
========================= */
.stats-container { max-width:600px; margin:2rem auto 4rem auto; padding:0 1rem; opacity:0; animation: fadeInUp 0.8s ease-out 0.5s forwards; }
.stats-header { text-align:center; margin-bottom:2rem; }
.stats-grid { display:grid; grid-template-columns: repeat(2, 1fr); gap:1.5rem; }
.stat-card { background: var(--bg-secondary); border-radius:12px; padding:1.5rem; text-align:center; box-shadow: var(--elevation-shadow); border: 1px solid rgba(255,255,255,0.06); transition: var(--transition-smooth); }
.stat-card:hover { transform: translateY(-2px); }
.stat-label { color: var(--text-secondary); font-size:0.9rem; margin-bottom:0.5rem; text-transform: uppercase; }
.stat-value { color: var(--text-primary); font-size:2rem; font-weight:600; }

/* Recent Activities */
.recent-activities { margin-top: 1.25rem; background: var(--bg-secondary); border-radius: 12px; padding:1rem; box-shadow: var(--elevation-shadow); border: 1px solid rgba(255,255,255,0.06); }
.recent-activities h3 { text-align:center; margin-bottom:0.75rem; color: var(--text-primary); font-size:1.1rem; }

.activity-list { max-height: 200px; overflow-y: auto; padding-right: 0.5rem; }
.activity-item { display:flex; justify-content:space-between; align-items:center; padding:0.6rem; border-radius:8px; margin-bottom:0.5rem; background: rgba(255,255,255,0.03); transition: var(--transition-smooth); }
.activity-item:hover { background: rgba(255,255,255,0.06); }
.activity-action { display:flex; align-items:center; gap:0.5rem; }
.activity-icon { width:14px; height:14px; border-radius:50%; flex:0 0 14px; box-shadow: 0 0 6px rgba(0,0,0,0.15); }
.activity-icon.on { background: #f1c40f; box-shadow: 0 0 10px rgba(241,196,15,0.25); }
.activity-icon.off { background: #95a5a6; }
.activity-text { color: var(--text-primary); font-size:0.9rem; font-weight:500; }
.activity-time { color: var(--text-secondary); font-size:0.8rem; margin-left:0.75rem; white-space:nowrap; }

/* Loading state */
.loading-state { text-align:center; color: var(--text-secondary); font-style:italic; padding: 1rem; }

/* Animations */
@keyframes fadeInUp { from { opacity:0; transform: translateY(30px); } to { opacity:1; transform: translateY(0); } }
@keyframes gentleSway { 0%,100%{ transform: rotate(0deg);} 25%{ transform: rotate(1deg);} 75%{ transform: rotate(-1deg);} }

/* Responsive */
@media (max-width:768px) {
    .container { padding:1rem; }
    .lamp-container { height:320px; }
    .hanging-lamp { top:80px; }
    .lamp-shade { width:160px; height:100px; }
    .shade-body { height:85px; }
    .light-glow { width:140px; height:140px; }
    .stats-grid { gap:1rem; }
    .stat-card { padding:1rem; }
}
@media (max-width:480px) {
    .app-title { font-size:1.8rem; }
    .lamp-container { height:280px; }
    .hanging-lamp { top:70px; }
    .lamp-shade { width:130px; height:80px; }
    .shade-body { height:70px; }
    .light-glow { width:110px; height:110px; }
    .stats-grid { grid-template-columns: 1fr; }
}
